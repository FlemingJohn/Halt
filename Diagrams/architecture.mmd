graph TD
    subgraph "Android OS"
        OS[Accessibility Events]
    end

    subgraph "Halt App"
        Service[HaltAccessibilityService]
        Detector[ScreenDetector]
        Settings[SettingsManager]
        Prefs[(SharedPreferences)]
        
        subgraph "UI"
            Main[MainActivity]
            SettingsUI[SettingsActivity]
            Block[BlockActivity]
        end
    end

    OS -->|Event: TYPE_WINDOW_CONTENT_CHANGED| Service
    Service -->|Check Paused| Settings
    Settings <--> Prefs
    
    Service -->|Analyze Content| Detector
    Detector -->|Result: Block| Service
    
    Service -->|Launch| Block
    Main -->|Configure| SettingsUI
    SettingsUI -->|Update| Settings
